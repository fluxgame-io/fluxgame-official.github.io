<!DOCTYPE html>
<html>
<head>
    <title>KABIR 3D REALISM V2</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; cursor: crosshair; }
        #ui { position: fixed; bottom: 20px; left: 20px; color: #00f2ff; font-family: 'Courier New'; text-shadow: 2px 2px #000; }
    </style>
</head>
<body>
    <div id="ui">DETECTIVE KABIR: SEARCHING FOR EVIDENCE...</div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script>
        let scene, camera, renderer, light, pivot;

        // Start
        init();

        function init() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.1, 1000);
            
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true; // Shadows on!
            document.body.appendChild(renderer.domElement);

            // 1. ASLI DEEWAREIN (Brick Texture Look)
            const loader = new THREE.TextureLoader();
            // Yahan hum ek gandi deewar ka texture simulate kar rahe hain
            const wallMat = new THREE.MeshStandardMaterial({ 
                color: 0x444444, 
                roughness: 0.9, 
                metalness: 0.1,
                side: THREE.BackSide 
            });
            
            const roomGeo = new THREE.BoxGeometry(20, 10, 30);
            const room = new THREE.Mesh(roomGeo, wallMat);
            room.receiveShadow = true;
            scene.add(room);

            // 2. OBSTACLES (Investigation ke liye cheezein)
            const boxGeo = new THREE.BoxGeometry(2, 4, 2);
            const boxMat = new THREE.MeshStandardMaterial({ color: 0x222222 });
            const box = new THREE.Mesh(boxGeo, boxMat);
            box.position.set(0, -3, -10);
            box.castShadow = true;
            scene.add(box);

            // 3. THE REAL FLASHLIGHT
            light = new THREE.SpotLight(0xffffff, 5); // Power badha di
            light.position.set(0, 0, 0);
            light.angle = Math.PI / 10; // Patli aur tez beam
            light.penumbra = 0.4; // Realistic soft edges
            light.decay = 2;
            light.distance = 40;
            light.castShadow = true;
            
            // Shadows thodi aur clear karne ke liye
            light.shadow.mapSize.width = 1024;
            light.shadow.mapSize.height = 1024;

            scene.add(light);
            scene.add(light.target);

            camera.position.z = 5;

            // Move Light with Mouse
            document.addEventListener('mousemove', (event) => {
                let x = (event.clientX / window.innerWidth) * 2 - 1;
                let y = -(event.clientY / window.innerHeight) * 2 + 1;
                
                // Camera ko halka rotate karo (Bodycam feel)
                camera.rotation.y = -x * 0.2;
                camera.rotation.x = y * 0.2;

                // Light target ko update karo
                let targetPos = new THREE.Vector3(x * 10, y * 10, -20);
                light.target.position.copy(targetPos);
            });

            animate();
        }

        function animate() {
            requestAnimationFrame(animate);
            // Ambient light ekdam kam taaki andhera rahe
            renderer.render(scene, camera);
        }
    </script>
</body>
</html>
