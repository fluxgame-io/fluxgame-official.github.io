<!DOCTYPE html>
<html>
<head>
    <title>DETECTIVE KABIR - FINAL</title>
    <style>
        body { margin: 0; background: #000; color: #00f2ff; font-family: 'Courier New', monospace; overflow: hidden; }
        #screen { width: 100vw; height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        
        /* Loading Screen */
        #loading { position: fixed; width: 100%; height: 100%; background: #000; z-index: 100; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .bar { width: 300px; height: 10px; border: 1px solid #00f2ff; margin-top: 20px; }
        .progress { width: 0%; height: 100%; background: #00f2ff; transition: 0.1s; }

        /* Menu */
        #menu { display: none; text-align: center; }
        .btn { border: 2px solid #00f2ff; padding: 15px 40px; margin: 10px; cursor: pointer; display: block; width: 200px; color: #00f2ff; background: none; font-weight: bold; }
        .btn:hover { background: #00f2ff; color: #000; }

        /* Game Area */
        #game { display: none; width: 800px; height: 500px; background: #222; border: 5px solid #444; position: relative; overflow: hidden; }
        #player { width: 40px; height: 40px; background: #00f2ff; position: absolute; top: 400px; left: 380px; border-radius: 5px; box-shadow: 0 0 10px #00f2ff; }
        .obj { position: absolute; background: orange; border: 2px solid #fff; }
        #door { width: 100px; height: 15px; background: red; top: 50px; left: 350px; text-align: center; color: white; font-size: 10px; }
        #hud { position: fixed; top: 10px; left: 10px; background: rgba(0,0,0,0.8); padding: 10px; border: 1px solid #00f2ff; }
    </style>
</head>
<body>

<div id="loading">
    <h1>KABIR: THE SILENT WITNESS</h1>
    <div class="bar"><div class="progress" id="bar"></div></div>
    <p>LOADING ASSETS...</p>
</div>

<div id="screen">
    <div id="menu">
        <h1 style="font-size: 50px;">MAIN MENU</h1>
        <button class="btn" onclick="start()">NEW GAME</button>
        <button class="btn" onclick="alert('No Saves')">LOAD GAME</button>
        <button class="btn" onclick="alert('Sound: ON')">SETTINGS</button>
    </div>

    <div id="game">
        <div id="hud">INV: <span id="inv">KHali</span> | Door: LOCKED</div>
        <div id="door">BASEMENT DOOR</div>
        <div id="pot" class="obj" style="width: 30px; height: 30px; top: 100px; left: 100px;">POT</div>
        <div id="player"></div>
    </div>
</div>

<script>
    // Loading Bar Logic
    let p = 0;
    let inv = setInterval(() => {
        p += 5;
        document.getElementById('bar').style.width = p + "%";
        if(p >= 100) {
            clearInterval(inv);
            document.getElementById('loading').style.display = 'none';
            document.getElementById('menu').style.display = 'block';
        }
    }, 50);

    let px = 380, py = 400;
    let hasCode = false;

    function start() {
        document.getElementById('menu').style.display = 'none';
        document.getElementById('game').style.display = 'block';
    }

    window.addEventListener('keydown', (e) => {
        let speed = 15;
        if(e.key === 'w' || e.key === 'ArrowUp') py -= speed;
        if(e.key === 's' || e.key === 'ArrowDown') py += speed;
        if(e.key === 'a' || e.key === 'ArrowLeft') px -= speed;
        if(e.key === 'd' || e.key === 'ArrowRight') px += speed;

        // Interaction Logic
        if(e.key === 'h' || e.key === 'H') {
            // Check Pot
            if(Math.abs(px - 100) < 50 && Math.abs(py - 100) < 50) {
                hasCode = true;
                document.getElementById('inv').innerText = "CODE: 1045";
                document.getElementById('pot').style.background = "gray";
                alert("Pot ke neeche code mil gaya: 1045!");
            }
            // Check Door
            if(Math.abs(px - 350) < 60 && Math.abs(py - 50) < 50) {
                if(hasCode) {
                    document.getElementById('door').style.background = "green";
                    document.getElementById('door').innerText = "OPEN";
                    alert("Darwaza khul gaya! Case Solved!");
                } else {
                    alert("Darwaza band hai. Pehle POT ke paas jaakar H dabao code ke liye.");
                }
            }
        }

        // Boundary
        px = Math.max(0, Math.min(760, px));
        py = Math.max(0, Math.min(460, py));

        document.getElementById('player').style.left = px + "px";
        document.getElementById('player').style.top = py + "px";
    });
</script>
</body>
</html>
